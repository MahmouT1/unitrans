# ๐ฏ ุชุนูููุงุช ุงูุชุทุจูู ุงูููุงุฆูุฉ - ุญู ูุดููุฉ Student Search

## ๐ ุชุญููู ูุชุงุฆุฌ ุงููุญุต ุงูุชุดุฎูุตู

### โ ูุง ูุนูู ุจุดูู ุตุญูุญ:
- โ MongoDB ูุนูู ุจุดูู ููุชุงุฒ
- โ Backend ูุนูู ุนูู Port 3001
- โ ูููุงุช .env ููุฌูุฏุฉ

### โ ุงููุดุงูู ุงูููุชุดูุฉ:
1. **Frontend ูุง ูุนูู ุนูู Port 3000** โ ุงููุดููุฉ ุงูุฑุฆูุณูุฉ! โ
2. Backend ูุง ูุญุชูู ุนูู route `/api/students/all`
3. Frontend .env.local ูุดูุฑ ุฅูู `https://unibus.online:3001`

---

## ๐ ุงูุญู - ุฎุทูุงุช ุงูุชูููุฐ

ุชู ุฅูุดุงุก **scripts ุฌุฏูุฏุฉ** ุชุญู ุฌููุน ุงููุดุงูู ุชููุงุฆูุงู.

### ุงูุทุฑููุฉ 1๏ธโฃ: ุงูุญู ุงููุงูู (ููุตู ุจู) โญ

ูุฐุง Script ูููู ุจูู ุดูุก:
- โ ุชุดุบูู Frontend ุฅุฐุง ูุงู ูุชููู
- โ ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅูุดุงุก ููู API ุงูููููุฏ
- โ ุฅุนุงุฏุฉ ุจูุงุก Frontend
- โ ุฅุนุงุฏุฉ ุชุดุบูู ุฌููุน ุงูุฎุฏูุงุช
- โ ุงุฎุชุจุงุฑ ุงููุชูุฌุฉ

**ุนูู ุงูุณูุฑูุฑุ ููุฐ:**

```bash
# 1. ุงุณุญุจ ุงูุชุญุฏูุซุงุช
cd /var/www/unitrans
git pull origin main

# 2. ุฃุนุท ุตูุงุญูุงุช
chmod +x complete-fix-student-search.sh

# 3. ุดุบู ุงูุญู ุงููุงูู
./complete-fix-student-search.sh
```

---

### ุงูุทุฑููุฉ 2๏ธโฃ: ุฅุนุงุฏุฉ ุชุดุบูู Frontend ููุท

ุฅุฐุง ููุช ุชุฑูุฏ ููุท ุฅุนุงุฏุฉ ุชุดุบูู Frontend:

```bash
cd /var/www/unitrans

# ุฃุนุท ุตูุงุญูุงุช
chmod +x fix-env-and-restart.sh

# ุดุบู
./fix-env-and-restart.sh
```

ูุฐุง Script ูููู ุจู:
- โ ุชุญุฏูุซ ูููุงุช .env
- โ ุฅุนุงุฏุฉ ุจูุงุก Frontend
- โ ุฅุนุงุฏุฉ ุชุดุบูู ุฌููุน ุงูุฎุฏูุงุช ุจู PM2

---

## ๐ ุจุนุฏ ุงูุชุทุจูู - ุงูุชุญูู ูู ุงููุฌุงุญ

### 1๏ธโฃ ุชุญูู ูู ุงูุฎุฏูุงุช:

```bash
pm2 list
```

ูุฌุจ ุฃู ุชุฑู:
- โ `backend-new` - online
- โ `frontend-new` - online

### 2๏ธโฃ ุชุญูู ูู ุงูููุงูุฐ:

```bash
lsof -i :3000  # Frontend
lsof -i :3001  # Backend
```

### 3๏ธโฃ ุงูุชุญ ุงููุชุตูุญ:

ุงุฐูุจ ุฅูู:
```
https://unibus.online/admin/users
```

**ุซู:**
1. ุงุถุบุท F12 ููุชุญ Developer Console
2. ุงุฐูุจ ูุชุจููุจ Console
3. ุงุถุบุท Refresh ุนูู ุงูุตูุญุฉ
4. **ูุฌุจ ุฃูุง ุชุฑู ุฃุฎุทุงุก 404**
5. **ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุงูุทูุงุจ ุชุธูุฑ** โ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ูุนูู Frontend ุจุนุฏ ุงูุชุทุจูู:

**1. ุชุญูู ูู Logs:**
```bash
pm2 logs frontend-new
```

**2. ุฅุนุงุฏุฉ ุงูุจูุงุก ูุฏููุงู:**
```bash
cd /var/www/unitrans/frontend-new
npm run build
pm2 restart frontend-new
```

**3. ุชุญูู ูู Port 3000:**
```bash
lsof -i :3000
```

ุฅุฐุง ูุงู Port 3000 ูุดุบูู ุจุนูููุฉ ุฃุฎุฑู:
```bash
# ุงูุชู ุงูุนูููุฉ ุงููุฏููุฉ
kill -9 $(lsof -t -i:3000)

# ุฃุนุฏ ุชุดุบูู Frontend
cd /var/www/unitrans/frontend-new
pm2 delete frontend-new
pm2 start npm --name frontend-new -- start
```

---

### ุฅุฐุง ุธูุฑุช ุฃุฎุทุงุก CORS:

ุชุฃูุฏ ูู ุฃู Backend .env ูุญุชูู ุนูู:
```bash
cat /var/www/unitrans/backend-new/.env | grep FRONTEND_URL
```

ูุฌุจ ุฃู ูุธูุฑ:
```
FRONTEND_URL=https://unibus.online
```

ุฅุฐุง ูู ููู ููุฌูุฏุงู:
```bash
echo "FRONTEND_URL=https://unibus.online" >> /var/www/unitrans/backend-new/.env
pm2 restart backend-new
```

---

### ุฅุฐุง ูุงูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงุฑุบุฉ:

ุชุญูู ูู ุนุฏุฏ ุงูุทูุงุจ:
```bash
mongosh student_portal --eval "db.students.countDocuments()"
```

ุฅุฐุง ูุงูุช ุงููุชูุฌุฉ `0`ุ ูุฌุจ ุฅุถุงูุฉ ุทูุงุจ ุฃููุงู.

---

## ๐ฏ ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงููุฑููุนุฉ

ุชู ุฑูุน ูุฐู Scripts ุนูู ุงูู repo:

1. **`complete-fix-student-search.sh`** โญ
   - ุงูุญู ุงููุงูู ุงูุดุงูู (ููุตู ุจู)

2. **`fix-env-and-restart.sh`**
   - ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุงุช ูุชุญุฏูุซ .env

3. **`test-database-connection.sh`**
   - ุงููุญุต ุงูุชุดุฎูุตู (ุชู ุชุดุบููู ูุณุจูุงู)

4. **`frontend-new/app/api/students/all/route.js`**
   - ููู API ุงูุฌุฏูุฏ ุงูููููุฏ โ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุจุนุฏ ุชุดุบูู ุงูู Script:

1. **ุฃุฑุณู ูู ูุชูุฌุฉ ุชุดุบูู ุงูู Script**
   - ุงูุณุฎ ูุงูู ุงูู output

2. **ุฃุฑุณู ูู ุตูุฑุฉ ูู Console ูู ุงููุชุตูุญ**
   - ุจุนุฏ ูุชุญ ุตูุญุฉ Student Search

3. **ุฃุฎุจุฑูู:**
   - ูู ุธูุฑุช ูุงุฆูุฉ ุงูุทูุงุจุ
   - ูู ูุง ุชุฒุงู ููุงู ุฃุฎุทุงุกุ

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### ุนู ุงูู .env.local:

ุงูููู ูุดูุฑ ุฅูู:
```
NEXT_PUBLIC_BACKEND_URL=https://unibus.online:3001
```

ูุฐุง **ุตุญูุญ** ูุฃู ุงููุดุฑูุน ูุนูู ุนูู ุฏูููู `unibus.online`.

### ุนู MongoDB:

ุงูุฃูุฑ `mongo` ุบูุฑ ููุฌูุฏุ ููู `mongosh` ููุฌูุฏ.
ุงูู Scripts ุงูุฌุฏูุฏุฉ ุชุณุชุฎุฏู `mongosh` ุชููุงุฆูุงู.

### ุนู PM2:

ุฅุฐุง ูู ููู PM2 ูุซุจุช:
```bash
npm install -g pm2
```

---

## โ ูุชู ุชุนุชุจุฑ ุงููุดููุฉ ูุญูููุฉุ

โ Frontend ูุนูู ุนูู Port 3000
โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก 404 ูู Console
โ ุตูุญุฉ Student Search ุชุนุฑุถ ูุงุฆูุฉ ุงูุทูุงุจ
โ ุงูุฅุญุตุงุฆูุงุช (Total Students, Active Students) ุชุธูุฑ ุจุดูู ุตุญูุญ

---

**ุฌุงูุฒ ููุชุทุจูู! ๐**

ุงุจุฏุฃ ุจุชูููุฐ ุงูุฃูุงูุฑ ูุฃุฑุณู ูู ุงููุชูุฌุฉ.
