===============================================
Ø­Ù„ Ø³Ø±ÙŠØ¹ Ù„Ù…Ø´ÙƒÙ„Ø© Student Search - Ø£ÙˆØ§Ù…Ø± Ù…Ø¨Ø§Ø´Ø±Ø©
===============================================

ðŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø£ÙˆØ§Ù…Ø± ÙˆØªÙ†ÙÙŠØ°Ù‡Ø§ ÙˆØ§Ø­Ø¯Ø© ØªÙ„Ùˆ Ø§Ù„Ø£Ø®Ø±Ù‰ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±:

-------------------
Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
-------------------
cd /var/www/unitrans

-------------------
Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù API Ø§Ù„Ù…ÙÙ‚ÙˆØ¯
-------------------
mkdir -p frontend-new/app/api/students/all

cat > frontend-new/app/api/students/all/route.js << 'EOF'
import { NextResponse } from 'next/server';

export async function GET(request) {
  try {
    const { searchParams } = new URL(request.url);
    const page = searchParams.get('page') || '1';
    const limit = searchParams.get('limit') || '20';
    const search = searchParams.get('search') || '';
    
    const backendUrl = process.env.BACKEND_URL || 'http://localhost:3001';
    const params = new URLSearchParams({
      page,
      limit,
      ...(search && { search })
    });
    
    console.log(`ðŸ“¡ Proxying request to backend: ${backendUrl}/api/students/all?${params}`);
    
    const backendResponse = await fetch(`${backendUrl}/api/students/all?${params}`, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
      },
    });
    
    const data = await backendResponse.json();
    
    if (!backendResponse.ok) {
      console.error('âŒ Backend error:', data);
      return NextResponse.json(data, { status: backendResponse.status });
    }
    
    console.log(`âœ… Successfully fetched ${data.students?.length || 0} students`);
    
    return NextResponse.json(data, { status: 200 });
    
  } catch (error) {
    console.error('âŒ Error fetching students:', error);
    return NextResponse.json(
      { 
        success: false, 
        message: 'Failed to fetch students', 
        error: error.message 
      },
      { status: 500 }
    );
  }
}
EOF

echo "âœ… Ù…Ù„Ù API ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡"

-------------------
Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† MongoDB
-------------------
systemctl status mongod

# Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† ÙŠØ¹Ù…Ù„ØŒ Ø´ØºÙ„Ù‡:
sudo systemctl start mongod

-------------------
Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Frontend
-------------------
cd /var/www/unitrans/frontend-new
npm run build

-------------------
Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
-------------------
# Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù… PM2:
pm2 restart all
pm2 save
pm2 logs

# Ø£Ùˆ Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù… systemd:
sudo systemctl restart unitrans-backend
sudo systemctl restart unitrans-frontend

-------------------
Ø§Ù„Ø®Ø·ÙˆØ© 6: Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ù„
-------------------
# Ø§Ø®ØªØ¨Ø± Backend
curl http://localhost:3001/api/students/all?page=1&limit=20

# Ø§Ø®ØªØ¨Ø± Frontend
curl http://localhost:3000/api/students/all?page=1&limit=20

-------------------
âœ… Ø§Ù†ØªÙ‡Ù‰! 
-------------------

Ø§Ù„Ø¢Ù†:
1. Ø§ÙØªØ­ Ø§Ù„Ù…ØªØµÙØ­
2. Ø§Ø°Ù‡Ø¨ Ù„ØµÙØ­Ø© Student Search
3. Ø§Ø¶ØºØ· F12 Ù„ÙØªØ­ Console
4. Ø§Ø¶ØºØ· Refresh
5. ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙŠØ¸Ù‡Ø±ÙˆÙ† Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª âœ…

-------------------
Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ù…Ø´Ø§ÙƒÙ„:
-------------------
# Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù„ÙˆØ¬Ø§Øª:
pm2 logs

# ØªØ­Ù‚Ù‚ Ù…Ù† MongoDB:
mongo
> use student_portal
> db.students.count()
> exit

# ØªØ­Ù‚Ù‚ Ù…Ù† Nginx:
sudo nginx -t
sudo systemctl status nginx

===============================================
